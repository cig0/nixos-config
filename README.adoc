= One Flake To Rule All Hosts
:author: Mart√≠n Cigorraga
:email:  cig0.github@tutanota.com
:doctype: book

++++
<div></p></div>
++++

image::.repo_assets/frostedflakes.jpg[alt="Frosted Flakes", align="center"]

++++
<div style="text-align: center;">
<i>Picture credits: Robin Jakobsson - <a href="https://www.flickr.com/photos/robinjakobsson/8491521693">Flickr</a></i>
</p>
</div>
++++
This flake under heavy development!

v0.4 The great refactor.

Most notable changes in this version
- Deprecating of former nixos/modules/applications/applications.nix file
- Bake options for module enablement into each module

Flake features:
- WIP

toc::[]

==== üí° Quick reference

- The flake is always tested with `nix flake check` before commiting and pushing changes.
- With NixOS built-in tooling: `nixos-rebuild test --use-remote-sudo --update-input nixpkgs --update-input nixpkgs-unstable --flake FLAKE_SRC_PATH`.
- With link:https://github.com/viperML/nh[nh].

image::.repo_assets/wip.webp[alt="Frosted Flakes", align="center"]

# READ ME!
# ========
# The NixOS community generally recommends keeping the enabling/disabling logic in the individual module files rather than in the importing module.
# This follows the principle of separation of concerns and makes modules more self-contained.
# Benefits of this approach:
#   - Each module controls its own destiny
#   - Modules are self-contained
#   - Easier to maintain and understand
#   - Follows the NixOS convention of modules managing their own conditional activation
#   - Makes it easier to override in specific cases if needed
#   - This is the more idiomatic NixOS way of handling conditional module activation.

==== TODO

[ ] Implement dynamic NTP pool depending on timezone/region.
[ ] Implement dynamic module loading depending on host role.
[ ] Implement dynamic module loading depending on GUI shell.
[ ] Implement dynamic module loading depending on host's hardware.
[ ] Implement dynamic module loading depending on host's CPU architecture.
[X] Implement dynamic module loading depending on host's GPU vendor.

==== üìù License

This project is licensed under the AGPLv3 License - see the link:LICENSE[LICENSE] file for details.